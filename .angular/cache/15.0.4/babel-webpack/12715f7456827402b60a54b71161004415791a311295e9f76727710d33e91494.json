{"ast":null,"code":"import { SubjectSubscriber } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nexport class ConnectableObservable extends Observable {\n  constructor(source, subjectFactory) {\n    super();\n    this.source = source;\n    this.subjectFactory = subjectFactory;\n    this._refCount = 0;\n    this._isComplete = false;\n  }\n\n  _subscribe(subscriber) {\n    return this.getSubject().subscribe(subscriber);\n  }\n\n  getSubject() {\n    const subject = this._subject;\n\n    if (!subject || subject.isStopped) {\n      this._subject = this.subjectFactory();\n    }\n\n    return this._subject;\n  }\n\n  connect() {\n    let connection = this._connection;\n\n    if (!connection) {\n      this._isComplete = false;\n      connection = this._connection = new Subscription();\n      connection.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n\n      if (connection.closed) {\n        this._connection = null;\n        connection = Subscription.EMPTY;\n      }\n    }\n\n    return connection;\n  }\n\n  refCount() {\n    return higherOrderRefCount()(this);\n  }\n\n}\nexport const connectableObservableDescriptor = (() => {\n  const connectableProto = ConnectableObservable.prototype;\n  return {\n    operator: {\n      value: null\n    },\n    _refCount: {\n      value: 0,\n      writable: true\n    },\n    _subject: {\n      value: null,\n      writable: true\n    },\n    _connection: {\n      value: null,\n      writable: true\n    },\n    _subscribe: {\n      value: connectableProto._subscribe\n    },\n    _isComplete: {\n      value: connectableProto._isComplete,\n      writable: true\n    },\n    getSubject: {\n      value: connectableProto.getSubject\n    },\n    connect: {\n      value: connectableProto.connect\n    },\n    refCount: {\n      value: connectableProto.refCount\n    }\n  };\n})();\n\nclass ConnectableSubscriber extends SubjectSubscriber {\n  constructor(destination, connectable) {\n    super(destination);\n    this.connectable = connectable;\n  }\n\n  _error(err) {\n    this._unsubscribe();\n\n    super._error(err);\n  }\n\n  _complete() {\n    this.connectable._isComplete = true;\n\n    this._unsubscribe();\n\n    super._complete();\n  }\n\n  _unsubscribe() {\n    const connectable = this.connectable;\n\n    if (connectable) {\n      this.connectable = null;\n      const connection = connectable._connection;\n      connectable._refCount = 0;\n      connectable._subject = null;\n      connectable._connection = null;\n\n      if (connection) {\n        connection.unsubscribe();\n      }\n    }\n  }\n\n}\n\nclass RefCountOperator {\n  constructor(connectable) {\n    this.connectable = connectable;\n  }\n\n  call(subscriber, source) {\n    const {\n      connectable\n    } = this;\n    connectable._refCount++;\n    const refCounter = new RefCountSubscriber(subscriber, connectable);\n    const subscription = source.subscribe(refCounter);\n\n    if (!refCounter.closed) {\n      refCounter.connection = connectable.connect();\n    }\n\n    return subscription;\n  }\n\n}\n\nclass RefCountSubscriber extends Subscriber {\n  constructor(destination, connectable) {\n    super(destination);\n    this.connectable = connectable;\n  }\n\n  _unsubscribe() {\n    const {\n      connectable\n    } = this;\n\n    if (!connectable) {\n      this.connection = null;\n      return;\n    }\n\n    this.connectable = null;\n    const refCount = connectable._refCount;\n\n    if (refCount <= 0) {\n      this.connection = null;\n      return;\n    }\n\n    connectable._refCount = refCount - 1;\n\n    if (refCount > 1) {\n      this.connection = null;\n      return;\n    }\n\n    const {\n      connection\n    } = this;\n    const sharedConnection = connectable._connection;\n    this.connection = null;\n\n    if (sharedConnection && (!connection || sharedConnection === connection)) {\n      sharedConnection.unsubscribe();\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Morgan/Desktop/DEV/angular/mbo-ez-angular-ez-http-client/node_modules/rxjs/_esm2015/internal/observable/ConnectableObservable.js"],"names":["SubjectSubscriber","Observable","Subscriber","Subscription","refCount","higherOrderRefCount","ConnectableObservable","constructor","source","subjectFactory","_refCount","_isComplete","_subscribe","subscriber","getSubject","subscribe","subject","_subject","isStopped","connect","connection","_connection","add","ConnectableSubscriber","closed","EMPTY","connectableObservableDescriptor","connectableProto","prototype","operator","value","writable","destination","connectable","_error","err","_unsubscribe","_complete","unsubscribe","RefCountOperator","call","refCounter","RefCountSubscriber","subscription","sharedConnection"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,YAAlC;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,QAAQ,IAAIC,mBAArB,QAAgD,uBAAhD;AACA,OAAO,MAAMC,qBAAN,SAAoCL,UAApC,CAA+C;AAClDM,EAAAA,WAAW,CAACC,MAAD,EAASC,cAAT,EAAyB;AAChC;AACA,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,cAAL,GAAsBA,cAAtB;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACH;;AACDC,EAAAA,UAAU,CAACC,UAAD,EAAa;AACnB,WAAO,KAAKC,UAAL,GAAkBC,SAAlB,CAA4BF,UAA5B,CAAP;AACH;;AACDC,EAAAA,UAAU,GAAG;AACT,UAAME,OAAO,GAAG,KAAKC,QAArB;;AACA,QAAI,CAACD,OAAD,IAAYA,OAAO,CAACE,SAAxB,EAAmC;AAC/B,WAAKD,QAAL,GAAgB,KAAKR,cAAL,EAAhB;AACH;;AACD,WAAO,KAAKQ,QAAZ;AACH;;AACDE,EAAAA,OAAO,GAAG;AACN,QAAIC,UAAU,GAAG,KAAKC,WAAtB;;AACA,QAAI,CAACD,UAAL,EAAiB;AACb,WAAKT,WAAL,GAAmB,KAAnB;AACAS,MAAAA,UAAU,GAAG,KAAKC,WAAL,GAAmB,IAAIlB,YAAJ,EAAhC;AACAiB,MAAAA,UAAU,CAACE,GAAX,CAAe,KAAKd,MAAL,CACVO,SADU,CACA,IAAIQ,qBAAJ,CAA0B,KAAKT,UAAL,EAA1B,EAA6C,IAA7C,CADA,CAAf;;AAEA,UAAIM,UAAU,CAACI,MAAf,EAAuB;AACnB,aAAKH,WAAL,GAAmB,IAAnB;AACAD,QAAAA,UAAU,GAAGjB,YAAY,CAACsB,KAA1B;AACH;AACJ;;AACD,WAAOL,UAAP;AACH;;AACDhB,EAAAA,QAAQ,GAAG;AACP,WAAOC,mBAAmB,GAAG,IAAH,CAA1B;AACH;;AAlCiD;AAoCtD,OAAO,MAAMqB,+BAA+B,GAAG,CAAC,MAAM;AAClD,QAAMC,gBAAgB,GAAGrB,qBAAqB,CAACsB,SAA/C;AACA,SAAO;AACHC,IAAAA,QAAQ,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KADP;AAEHpB,IAAAA,SAAS,EAAE;AAAEoB,MAAAA,KAAK,EAAE,CAAT;AAAYC,MAAAA,QAAQ,EAAE;AAAtB,KAFR;AAGHd,IAAAA,QAAQ,EAAE;AAAEa,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KAHP;AAIHV,IAAAA,WAAW,EAAE;AAAES,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,QAAQ,EAAE;AAAzB,KAJV;AAKHnB,IAAAA,UAAU,EAAE;AAAEkB,MAAAA,KAAK,EAAEH,gBAAgB,CAACf;AAA1B,KALT;AAMHD,IAAAA,WAAW,EAAE;AAAEmB,MAAAA,KAAK,EAAEH,gBAAgB,CAAChB,WAA1B;AAAuCoB,MAAAA,QAAQ,EAAE;AAAjD,KANV;AAOHjB,IAAAA,UAAU,EAAE;AAAEgB,MAAAA,KAAK,EAAEH,gBAAgB,CAACb;AAA1B,KAPT;AAQHK,IAAAA,OAAO,EAAE;AAAEW,MAAAA,KAAK,EAAEH,gBAAgB,CAACR;AAA1B,KARN;AASHf,IAAAA,QAAQ,EAAE;AAAE0B,MAAAA,KAAK,EAAEH,gBAAgB,CAACvB;AAA1B;AATP,GAAP;AAWH,CAb8C,GAAxC;;AAcP,MAAMmB,qBAAN,SAAoCvB,iBAApC,CAAsD;AAClDO,EAAAA,WAAW,CAACyB,WAAD,EAAcC,WAAd,EAA2B;AAClC,UAAMD,WAAN;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACH;;AACDC,EAAAA,MAAM,CAACC,GAAD,EAAM;AACR,SAAKC,YAAL;;AACA,UAAMF,MAAN,CAAaC,GAAb;AACH;;AACDE,EAAAA,SAAS,GAAG;AACR,SAAKJ,WAAL,CAAiBtB,WAAjB,GAA+B,IAA/B;;AACA,SAAKyB,YAAL;;AACA,UAAMC,SAAN;AACH;;AACDD,EAAAA,YAAY,GAAG;AACX,UAAMH,WAAW,GAAG,KAAKA,WAAzB;;AACA,QAAIA,WAAJ,EAAiB;AACb,WAAKA,WAAL,GAAmB,IAAnB;AACA,YAAMb,UAAU,GAAGa,WAAW,CAACZ,WAA/B;AACAY,MAAAA,WAAW,CAACvB,SAAZ,GAAwB,CAAxB;AACAuB,MAAAA,WAAW,CAAChB,QAAZ,GAAuB,IAAvB;AACAgB,MAAAA,WAAW,CAACZ,WAAZ,GAA0B,IAA1B;;AACA,UAAID,UAAJ,EAAgB;AACZA,QAAAA,UAAU,CAACkB,WAAX;AACH;AACJ;AACJ;;AA1BiD;;AA4BtD,MAAMC,gBAAN,CAAuB;AACnBhC,EAAAA,WAAW,CAAC0B,WAAD,EAAc;AACrB,SAAKA,WAAL,GAAmBA,WAAnB;AACH;;AACDO,EAAAA,IAAI,CAAC3B,UAAD,EAAaL,MAAb,EAAqB;AACrB,UAAM;AAAEyB,MAAAA;AAAF,QAAkB,IAAxB;AACAA,IAAAA,WAAW,CAACvB,SAAZ;AACA,UAAM+B,UAAU,GAAG,IAAIC,kBAAJ,CAAuB7B,UAAvB,EAAmCoB,WAAnC,CAAnB;AACA,UAAMU,YAAY,GAAGnC,MAAM,CAACO,SAAP,CAAiB0B,UAAjB,CAArB;;AACA,QAAI,CAACA,UAAU,CAACjB,MAAhB,EAAwB;AACpBiB,MAAAA,UAAU,CAACrB,UAAX,GAAwBa,WAAW,CAACd,OAAZ,EAAxB;AACH;;AACD,WAAOwB,YAAP;AACH;;AAbkB;;AAevB,MAAMD,kBAAN,SAAiCxC,UAAjC,CAA4C;AACxCK,EAAAA,WAAW,CAACyB,WAAD,EAAcC,WAAd,EAA2B;AAClC,UAAMD,WAAN;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACH;;AACDG,EAAAA,YAAY,GAAG;AACX,UAAM;AAAEH,MAAAA;AAAF,QAAkB,IAAxB;;AACA,QAAI,CAACA,WAAL,EAAkB;AACd,WAAKb,UAAL,GAAkB,IAAlB;AACA;AACH;;AACD,SAAKa,WAAL,GAAmB,IAAnB;AACA,UAAM7B,QAAQ,GAAG6B,WAAW,CAACvB,SAA7B;;AACA,QAAIN,QAAQ,IAAI,CAAhB,EAAmB;AACf,WAAKgB,UAAL,GAAkB,IAAlB;AACA;AACH;;AACDa,IAAAA,WAAW,CAACvB,SAAZ,GAAwBN,QAAQ,GAAG,CAAnC;;AACA,QAAIA,QAAQ,GAAG,CAAf,EAAkB;AACd,WAAKgB,UAAL,GAAkB,IAAlB;AACA;AACH;;AACD,UAAM;AAAEA,MAAAA;AAAF,QAAiB,IAAvB;AACA,UAAMwB,gBAAgB,GAAGX,WAAW,CAACZ,WAArC;AACA,SAAKD,UAAL,GAAkB,IAAlB;;AACA,QAAIwB,gBAAgB,KAAK,CAACxB,UAAD,IAAewB,gBAAgB,KAAKxB,UAAzC,CAApB,EAA0E;AACtEwB,MAAAA,gBAAgB,CAACN,WAAjB;AACH;AACJ;;AA5BuC","sourcesContent":["import { SubjectSubscriber } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nexport class ConnectableObservable extends Observable {\n    constructor(source, subjectFactory) {\n        super();\n        this.source = source;\n        this.subjectFactory = subjectFactory;\n        this._refCount = 0;\n        this._isComplete = false;\n    }\n    _subscribe(subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    }\n    getSubject() {\n        const subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    }\n    connect() {\n        let connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n        }\n        return connection;\n    }\n    refCount() {\n        return higherOrderRefCount()(this);\n    }\n}\nexport const connectableObservableDescriptor = (() => {\n    const connectableProto = ConnectableObservable.prototype;\n    return {\n        operator: { value: null },\n        _refCount: { value: 0, writable: true },\n        _subject: { value: null, writable: true },\n        _connection: { value: null, writable: true },\n        _subscribe: { value: connectableProto._subscribe },\n        _isComplete: { value: connectableProto._isComplete, writable: true },\n        getSubject: { value: connectableProto.getSubject },\n        connect: { value: connectableProto.connect },\n        refCount: { value: connectableProto.refCount }\n    };\n})();\nclass ConnectableSubscriber extends SubjectSubscriber {\n    constructor(destination, connectable) {\n        super(destination);\n        this.connectable = connectable;\n    }\n    _error(err) {\n        this._unsubscribe();\n        super._error(err);\n    }\n    _complete() {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        super._complete();\n    }\n    _unsubscribe() {\n        const connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            const connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    }\n}\nclass RefCountOperator {\n    constructor(connectable) {\n        this.connectable = connectable;\n    }\n    call(subscriber, source) {\n        const { connectable } = this;\n        connectable._refCount++;\n        const refCounter = new RefCountSubscriber(subscriber, connectable);\n        const subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    }\n}\nclass RefCountSubscriber extends Subscriber {\n    constructor(destination, connectable) {\n        super(destination);\n        this.connectable = connectable;\n    }\n    _unsubscribe() {\n        const { connectable } = this;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        const refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        const { connection } = this;\n        const sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}